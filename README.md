# 小学生口算题生成器

一个创新的口算练习题生成器，采用"题刷"交互模式，让用户像使用画笔一样直观地在试卷网格上生成题目。

## 功能特性

### 核心交互 - 题刷模式
- **矩形选区拖拽**：类似Excel，拖拽选中起止格子范围内的所有格子，可从任意格子开始拖拽
- **实时预览**：拖拽过程中实时显示题目预览，松开鼠标后正式生成
- **橡皮擦工具**：切换到橡皮擦后，拖拽可批量清空格子
- **快捷清除**：鼠标悬停在已填充格子上时，右侧显示清除按钮，点击可快速删除单个题目

### 题刷配置
- **运算数个数**：支持2个或3个操作数
  - 2个操作数：如 `5 + 3 = ___`
  - 3个操作数：如 `5 + 3 - 2 = ___`
- **逐个配置运算数和运算符**：
  - 数字1/2/3：每个运算数可独立设置数值范围
  - 运算符1/2：每个位置可多选运算符（+、-、×、÷）
  - 界面以表达式结构呈现，直观易懂
- **题目格式**：
  - 标准格式：`3 + 5 = ___`（求结果）
  - 填空格式：`3 + ___ = 8`（求中间数）
  - 混合格式：随机使用以上两种格式
- **括号支持**：3个运算数时可选是否使用括号

### 运算结果限制
- 减法结果不为负数
- 除法必须整除
- 混合运算中间结果也遵循以上规则

### 试卷设置
- **题目数量**：默认100题，可调整（60-120）
- **列数**：自动计算最佳列数，或手动设置2-5列
- **题号显示**：可选是否显示题号
- **头部信息**：
  - 自定义试卷标题
  - 显示模式：显示 / 隐藏（打印时可见）/ 隐藏
  - 包含姓名/日期/用时/得分栏

### 预设系统
- **题刷预设**：保存常用的题刷配置，快速切换
- **试卷预设**：保存整张试卷的结构（每题的配置），加载后重新生成题目
- **数字范围预设**：自定义数字范围可添加到预设列表

### 其他功能
- **一键填充**：用当前题刷填满所有空格子
- **全部清空**：清空所有题目
- **撤销/重做**：支持 Ctrl+Z / Ctrl+Y，最多50步历史
- **打印**：自动隐藏配置面板，答案页跟随题目页打印
- **自动保存**：配置和预设自动保存到浏览器localStorage

## 使用方法

### 基本操作
1. 双击 `index.html` 用浏览器打开
2. 在左侧面板配置题刷参数（运算符、数字范围等）
3. 在试卷区域拖拽鼠标生成题目（矩形选区）
4. 点击"打印试卷"按钮打印

### 面板Tab切换
- **题刷配置**：工具选择、运算符、运算数个数、格式、数字范围、题刷预设、快捷操作
- **试卷设置**：题目数量、列数、题号显示、头部信息设置、试卷预设
- **打印按钮**：固定在面板底部，不受Tab切换影响

### 拖拽刷题
1. 在任意格子上按下鼠标（无论是否已填充）
2. 拖拽到目标位置，形成矩形选区
3. 拖拽过程中会实时预览生成的题目
4. 松开鼠标，题目正式生成

### 清除单个题目
- 鼠标悬停在已填充的格子上，点击右侧出现的 × 按钮即可清除

### 使用橡皮擦
1. 点击左侧面板的"橡皮擦"按钮
2. 在试卷区域拖拽，选区内的题目将被清空

### 保存预设
1. 配置好题刷参数后，点击"保存当前"按钮
2. 输入预设名称，点击保存
3. 下次可直接点击预设名称快速应用

## 文件结构

```
口算/
├── index.html     # 主页面
├── styles.css     # 样式文件
├── app.js         # 核心逻辑
├── README.md      # 项目文档
└── CHANGELOG.md   # 更新日志
```

## 技术实现

- **纯前端实现**：HTML + CSS + JavaScript，无需后端
- **本地运行**：直接用浏览器打开即可使用
- **数据持久化**：使用 localStorage 保存用户配置和预设
- **打印适配**：CSS @media print 适配A4纸张

## 浏览器兼容性

支持现代浏览器：
- Chrome（推荐）
- Edge
- Firefox
- Safari

## 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+Z | 撤销 |
| Ctrl+Y | 重做 |
| Ctrl+Shift+Z | 重做 |
| Escape | 关闭对话框 |

## 更新日志

详见 [CHANGELOG.md](CHANGELOG.md)
